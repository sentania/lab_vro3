<?xml version='1.0' encoding='UTF-8'?>
<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item1" object-name="workflow:name=generic" id="6ca5aa29-8860-48f5-92f4-b69fffe1f8fc" version="0.0.0" api-version="6.0.0" allowed-operations="vfe" restartMode="1" resumeFromFailedMode="0">
  <display-name><![CDATA[Get vRA Rest Endpoints]]></display-name>
  <position y="50.0" x="100.0"/>
  <workflow-item name="item0" type="end" end-mode="0">
    <position y="45.40909090909091" x="384.5"/>
  </workflow-item>
  <workflow-item name="item1" out-name="item0" type="task">
    <display-name><![CDATA[Scriptable task]]></display-name>
    <script encoded="false"><![CDATA[var cafeHost= Server.findAllForType("vCACCAFE:VCACHost")[0];
var endpoint = "com.vmware.csp.core.componentregistry.api"
var restClient = cafeHost.createRestClient(endpoint);
 
// print the base URL
System.log(restClient.getUrl());
 
// Get the endpoints
var resourceUrl = "/endpoints?limit=1000&orderby=\"url\"";
// Print the request URL
System.log("resourceUrl " + resourceUrl);
 
response = restClient.get(resourceUrl);
// convert the response into JSON
var jsonContent = response.getBodyAsJson();
 
// Dump the end points
for each (var endpoint in jsonContent.content) {
 var typeId = endpoint.endPointType.typeId;
 if (typeId.search("api") >= 0) {
 // only print the types with api in the string
 System.log("Endpoint URL = " + endpoint.url + " with endpoint value = " + endpoint.endPointType.typeId);
 };
};]]></script>
    <in-binding/>
    <out-binding/>
    <position y="55.40909090909091" x="204.5"/>
  </workflow-item>
  <presentation/>
</workflow>