<?xml version='1.0' encoding='UTF-8'?>
<dunes-script-module name="setLockForLockingSystem" result-type="void" api-version="6.0.0" id="cd0e72bf-5e26-48f1-af11-af040d16ec1b" version="0.0.0" allowed-operations="evf" category-name="com.sovlabs.vra.utilities">
  <param n="lockID" t="string"><![CDATA[Lock ID]]></param>
  <param n="lockOwner" t="string"><![CDATA[Lock Owner]]></param>
  <param n="lockAction" t="boolean"><![CDATA[If true, lock Lock.  If false, unlock Lock.]]></param>
  <script encoded="false"><![CDATA[if (lockID == null || lockID == undefined || lockOwner == null || lockOwner == undefined) {
	throw "Unable to create lock without lockID and/or lockOwner";
}

if (lockAction === true) {//Locking
	System.log("Attempting LOCK: " + lockID + ":" + lockOwner);  

	LockingSystem.lockAndWait(lockID, lockOwner);

	System.log("LOCKED: " + lockID + ":" + lockOwner);
} else { //Unlocking
	LockingSystem.unlock(lockID, lockOwner);
	System.log("UNLOCKED: " + lockID + ":" + lockOwner);
}]]></script>
</dunes-script-module>