<?xml version='1.0' encoding='UTF-8'?>
<dunes-script-module name="asdGetAllF5ServerSSLForPartition" result-type="Array/string" api-version="6.0.0" id="6d51fd1a-f738-4467-a726-3e18d936c2fb" version="0.0.3" allowed-operations="evf" category-name="com.sovlabs.f5">
  <param n="f5EndpointName" t="string"/>
  <param n="tenant" t="string"/>
  <param n="partition" t="string"/>
  <script encoded="false"><![CDATA[var retArray = [];

var restipe = "---\n"+
        "restipeName: SovLabs F5 Utilities\n" +
        "description: SovLabs F5 Utilities - Get F5 Server SSLs for Partition\n" +
        "debugLogging: true\n" +
        "user: \"{{restipe.host.user}}\"\n" +
        "password: \"{{restipe.host.password}}\"\n" +
        "useBasicAuth: true\n" +
        "baseurl: \"{{restipe.host.protocol}}://{{restipe.host.hostname}}:{{restipe.host.port}}/mgmt/tm\"\n" +
		"#########################\n" +
		"#  Start the steps Here\n" +
		"#########################\n" +
        "steps:\n" +
        "  getServerSSLs:\n" +
        "    description: Get the list of Server SSLs for Virtual and Partition\n" +
        "    url: \"{{restipe.baseurl}}/ltm/profile/server-ssl\"\n" +
        "    method: get\n" +
        "    nextStep: \"{% if restipe.getServerSSLs.status == 200%}SUCCESS{% else %}FAILURE{% endif %}\"";

try {
	if (f5EndpointName !== null && tenant !== null && partition !== null) {
		var response = sovlabsF5Manager.executeRestipeString(f5EndpointName , tenant , "{}" , restipe, "getServerSSLs");
		ret = JSON.parse(response);
		
		
		for each ( var item in ret.restipe.getServerSSLs.body.items )  {
		  if ( item.partition == partition ) { 
		    retArray.push(item.name);
		  }
		}
	}
} catch (e) {

}

return retArray;
]]></script>
</dunes-script-module>