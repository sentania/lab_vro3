<?xml version='1.0' encoding='UTF-8'?>
<dunes-script-module name="asdGetAllF5Partitions" result-type="Array/string" api-version="6.0.0" id="4f95a3bb-9526-4325-af88-d8505636e4de" version="0.0.4" allowed-operations="evf" category-name="com.sovlabs.f5">
  <param n="f5EndpointName" t="string"/>
  <param n="tenant" t="string"/>
  <script encoded="false"><![CDATA[var retArray = [];

var restipe = "---\n"+
        "restipeName: SovLabs F5 Utilities\n" +
        "description: SovLabs F5 Utilities - Get Partitions\n" +
        "debugLogging: true\n" +
        "user: \"{{restipe.host.user}}\"\n" +
        "password: \"{{restipe.host.password}}\"\n" +
        "useBasicAuth: true\n" +
        "baseurl: \"{{restipe.host.protocol}}://{{restipe.host.hostname}}:{{restipe.host.port}}/mgmt/tm\"\n" +
		"#########################\n" +
		"#  Start the steps Here\n" +
		"#########################\n" +
        "steps:\n" +
        "  getPartitions:\n" +
        "    description: Get the list of Partitions\n" +
        "    url: \"{{restipe.baseurl}}/sys/folder\"\n" +
        "    method: get\n" +
        "    nextStep: \"{% if restipe.getPartitions.status == 200%}SUCCESS{% else %}FAILURE{% endif %}\"";

try {
	if (tenant !== null && f5EndpointName !== null) {
		var response = sovlabsF5Manager.executeRestipeString(f5EndpointName, tenant, "{}", restipe, "getPartitions");
		ret = JSON.parse(response);
		
		for each( var item in ret.restipe.getPartitions.body.items )  {
		  if ( item.name != "/" ) { 
		    retArray.push(item.name);
		  }
		}
	
	}
} catch (e) {

}
return retArray;]]></script>
</dunes-script-module>